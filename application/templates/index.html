<!DOCTYPE html>
<html>
  <head>
    <title>DocsGPT ğŸ¦– æ™ºèƒ½æ–‡æ¡£å°åŠ©æ‰‹</title>
    <link href="{{url_for('static',filename='dist/css/output.css')}}" rel="stylesheet">
      <link rel="favicon" href="{{ url_for('static', filename='favicon/favicon.ico') }}">
      <link rel="apple-touch-icon" sizes="180x180" href="{{ url_for('static', filename='favicon/apple-touch-icon.png') }}">
    <link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='favicon/favicon-32x32.png') }}">
    <link rel="icon" type="image/png" sizes="16x16" href="{{ url_for('static', filename='favicon/favicon-16x16.png') }}">
    <link rel="manifest" href="{{ url_for('static', filename='favicon//site.webmanifest') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">



  </head>


  <body>



    <header class="bg-white p-2 flex justify-between items-center">
      <h1 class="text-lg font-medium">DocsGPT ğŸ¦– æ™ºèƒ½æ–‡æ¡£å°åŠ©æ‰‹</h1>
        <div>
      Powered by <a href="https://icloudnative.io" class="text-blue-500 hover:text-blue-800 text-sm">äº‘åŸç”Ÿå®éªŒå®¤</a>
            {% if not api_key_set %}
      <button class="text-sm text-yellow-500 hover:text-yellow-800" onclick="resetApiKey()">é‡ç½® Key</button>
        {% endif %}
            </div>
    </header>
    <div class="lg:flex ml-2 mr-2">
      <div class="lg:w-3/4 min-h-screen max-h-screen">
        <div class="w-full flex flex-col h-5/6">
          <div id="messages-container" style="overflow: auto;" class="sm:max-lg:mb-[12rem]">

            <div id="messages" class="w-full flex flex-col mt-2" >
              <div class="bg-indigo-500 text-white p-2 rounded-lg mb-2 self-start">
                <p class="text-sm">ä½ å¥½ï¼Œè¯·å‘æˆ‘è¯¢é—®æœ‰å…³è¿™ä¸ªæ–‡æ¡£çš„ä»»ä½•é—®é¢˜</p>
              </div>
              <div class="bg-blue-500 text-white p-2 rounded-lg mb-2 self-end">
                <p class="text-sm">laf æ˜¯ä»€ä¹ˆï¼Ÿ</p>
              </div>
              <div class="bg-indigo-500 text-white p-2 rounded-lg mb-2 self-start">
                <p class="text-sm">laf æ˜¯äº‘å¼€å‘å¹³å°ï¼Œå¯ä»¥å¿«é€Ÿçš„å¼€å‘åº”ç”¨<br>
laf æ˜¯ä¸€ä¸ªå¼€æºçš„ BaaS å¼€å‘å¹³å°ï¼ˆBackend as a Service)<br>
laf æ˜¯ä¸€ä¸ªå¼€ç®±å³ç”¨çš„ Serverless å¼€å‘å¹³å°<br>
laf æ˜¯ä¸€ä¸ªé›†ã€Œå‡½æ•°è®¡ç®—ã€ã€ã€Œæ•°æ®åº“ã€ã€ã€Œå¯¹è±¡å­˜å‚¨ã€ç­‰äºä¸€èº«çš„ä¸€ç«™å¼å¼€å‘å¹³å°<br>
laf å¯ä»¥æ˜¯å¼€æºç‰ˆçš„è…¾è®¯äº‘å¼€å‘ã€å¼€æºç‰ˆçš„ Google Firebase<br>
ç®€è€Œè¨€ä¹‹ï¼Œlaf æ˜¯ä¸€ä¸ª serverless æ¡†æ¶ï¼Œæä¾›å¼€ç®±å³ç”¨çš„äº‘å‡½æ•°ï¼Œäº‘æ•°æ®åº“ï¼Œå¯¹è±¡å­˜å‚¨ç­‰èƒ½åŠ›ï¼Œæ˜¯ä¸€ä¸ªä¸€ç«™å¼å¼€å‘å¹³å°ï¼Œåƒå†™åšå®¢ä¸€æ ·å†™ä»£ç ï¼ </p>
              </div>

          </div>
        </div>

        <div class="fixed bottom-0 w-full mt-4 mb-2 lg:w-3/4">
        <form id="message-form" autocomplete="off" class="flex items-stretch">
          <input autocomplete="off" id="message-input" class="bg-white p-2 rounded-lg ml-2 text-sm w-full" type="text" placeholder="è¯·è¾“å…¥ä½ çš„é—®é¢˜...">
          <button id="button-submit" class="bg-blue-500 text-white p-2 rounded-lg ml-2 mr-2 text-sm sm:max-lg:p-5" type="submit">å‘é€</button>
        </form>
        </div>


    </div>
        </div>
        <div class="lg:w-1/4 p-2 sm:max-lg:hidden">
          <p class="text-sm">è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨ GPT-3ã€Faiss å’Œ <a href="https://github.com/hwchase17/langchain" class="text-blue-500 hover:text-blue-800">LangChain</a> æ¥å›ç­”é¡¹ç›®æ–‡æ¡£ç›¸å…³é—®é¢˜çš„èŠå¤©æœºå™¨äºº</p>
          <br>
          <p class="text-sm">æºä»£ç åœ¨ <a href="https://github.com/yangchuansheng/DocsGPT" class="text-blue-500 hover:text-blue-800">Github ä»“åº“</a> ä¸­</p><br>
          <p class="text-sm">ç›®å‰ä½¿ç”¨ <a href="https://github.com/labring/laf" class="text-blue-500 hover:text-blue-800">laf</a> æ–‡æ¡£ï¼Œæ‰€ä»¥ä¼šå›å¤ laf ç›¸å…³çš„ä¿¡æ¯ã€‚å¦‚æœä½ æƒ³ä½¿ç”¨ä¸åŒçš„æ–‡æ¡£æ¥è®­ç»ƒå®ƒ - <a href="https://github.com/arc53/docsgpt/wiki/How-to-train-on-other-documentation" class="text-blue-500 hover:text-blue-800">è¯·å‚è€ƒè¿™ç¯‡æŒ‡å—</a></p><br>
          <p class="text-sm">å¦‚æœæ‚¨æƒ³åœ¨è‡ªå·±çš„æœåŠ¡å™¨ä¸Šè¿è¡Œ - <a href="https://github.com/yangchuansheng/DocsGPT#%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B" class="text-blue-500 hover:text-blue-800"> è¯·å‚è€ƒè¿™ç¯‡æŒ‡å— </a></p><br>
          <p class="text-sm">å¦‚æœä½ æƒ³å…è´¹ä½“éªŒ ChatGPT Plusï¼Œå¯ä»¥åŠ å…¥ <a href="https://t.me/fuck_you_chatgpt" class="text-blue-500 hover:text-blue-800">ChatGPT ç”¨æˆ·ä½“éªŒç¾¤</a></p><br>
          <p class="text-sm"><a href="https://shop.terobox.com/?from=1069" class="text-blue-500 hover:text-blue-800">ğŸ›’ ChatGPT Plus è®¢é˜…è´¦å·è´­ä¹°</a></p><br>
            <label  class="block mb-2 text-sm font-medium text-gray-900">ä» DocsHUB ä¸­é€‰æ‹©æ–‡æ¡£</label>
            <select id="select-docs" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5">
              <option selected value="default">é€‰æ‹©æ–‡æ¡£</option>
              <option value="default">Default</option>
            </select>
        </div>
    </div>

  <div class="flex items-center justify-center h-full">

</div>

{% if not api_key_set %}
<div class="fixed z-10 overflow-y-auto top-0 w-full left-0 hidden" id="modal">
  <div class="flex items-center justify-center min-height-100vh pt-4 px-4 pb-20 text-center sm:block sm:p-0">
    <div class="fixed inset-0 transition-opacity">
      <div class="absolute inset-0 bg-gray-900 opacity-75" />
    </div>
    <span class="hidden sm:inline-block sm:align-middle sm:h-screen">&#8203;</span>
    <div class=" text-sm inline-block align-center bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full" role="dialog" aria-modal="true" aria-labelledby="modal-headline">
       <form id="api-key-form">
        <div class="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
        <h2>åœ¨å¼€å§‹ä½¿ç”¨ DocsGPT ä¹‹å‰ï¼Œéœ€è¦æä¾›ä¸€ä¸ª llm çš„ API Keyã€‚ç›®å‰åªæ”¯æŒ OpenAIï¼Œåé¢ä¼šæ”¯æŒæ›´å¤šçš„é€‰é¡¹ã€‚ä½ å¯ä»¥åœ¨<a class="text-blue-500 hover:text-blue-800" href="https://platform.openai.com/account/api-keys">è¿™é‡Œ</a>æ‰¾åˆ° API Key</h2><br>
        <label>OpenAI API key:</label>

        <input id="api-key-input" type="password" class="w-full bg-gray-100 p-2 mt-2 mb-3" placeholder="Paste you Api Key here">

      </div>
      <div class="bg-gray-200 px-4 py-3 text-right">
        <button type="submit" class="py-2 px-4 bg-blue-500 text-white rounded hover:bg-blue-700 mr-2">ä¿å­˜</button>

      </div>
            </form>
    </div>
  </div>
</div>
{% endif %}
      <script>
          function docsIndex() {
                // loads latest index from https://raw.githubusercontent.com/arc53/DocsHUB/main/combined.json
                // and stores it in localStorage
                fetch('https://d3dg1063dc54p9.cloudfront.net/combined.json')
                    .then(response => response.json())
                    .then(data => {
                        localStorage.setItem("docsIndex", JSON.stringify(data));
                        localStorage.setItem("docsIndexDate", Date.now());
                        generateOptions()
                    }

                )

            }
          function generateOptions(){
                docsIndex = localStorage.getItem('docsIndex')
                // create option on select with id select-docs
                var select = document.getElementById("select-docs");
                // convert docsIndex to json
                docsIndex = JSON.parse(docsIndex)
                // create option for each key in docsIndex
                for (var key in docsIndex) {
                    var option = document.createElement("option");
                    if (docsIndex[key].name == docsIndex[key].language) {
                        option.text = docsIndex[key].name + " " + docsIndex[key].version;
                        option.value = docsIndex[key].name + "/" + ".project" + "/" + docsIndex[key].version + "/{{ embeddings_choice }}/";
                        if (docsIndex[key].model == "{{ embeddings_choice }}") {
                            select.add(option);
                        }
                    }
                    else {
                        option.text = docsIndex[key].name + " " + docsIndex[key].version;
                        option.value = docsIndex[key].language + "/" + docsIndex[key].name + "/" + docsIndex[key].version + "/{{ embeddings_choice }}/";
                        if (docsIndex[key].model == "{{ embeddings_choice }}") {
                            select.add(option);
                        }
                    }
                }

          }
        {% if not api_key_set %}
        if (localStorage.getItem('apiKey') === null) {
            console.log("apiKey is not set")
            document.getElementById('modal').classList.toggle('hidden')
        }
        {% endif %}
        if (localStorage.getItem('docsIndex') === null) {
            console.log("docsIndex is not set")
            docsIndex()
        }
        else if (localStorage.getItem("docsIndexDate") < Date.now() - 900000) {
            console.log("docsIndex is older than 15 minutes")
            docsIndex()
        }

        generateOptions()

  </script>
    {% if not api_key_set %}
    <script src="{{url_for('static',filename='src/authapi.js')}}"></script>
    {% endif %}
  <script src="{{url_for('static',filename='src/chat.js')}}"></script>
  <script src="{{url_for('static',filename='src/choiceChange.js')}}"></script>

  </body>
</html>